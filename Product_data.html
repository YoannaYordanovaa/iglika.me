<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Products</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="Product_data.css">
    <link rel="stylesheet" href="header.css">
    <link rel="stylesheet" href="footer.css">
    <link href="https://fonts.googleapis.com/css2?family=Marck+Script&amp;display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
  </head>
  <body>
    <header id="header">
      <div class="logo"><a href="index.html"><img src="index_img/IglikaLogo.png" alt="Logo"></a></div>
      <input type="checkbox" title="menu-bar" id="menu-bar"> 
      <label for="menu-bar"><img src="index_img/hamburger.png" alt=""></label>
      <nav class="navbar">
        <ul>
          <li class="h1"><a href="index.html">За мен</a></li>
          <li class="h1"><a href="products.html">Продукти</a><span class="arrow"><i class="fa fa-angle-down"></i></span>
            <ul>
              <li><a href="health.html">Напитки и добавки</a><span class="arrow"><i class="fa fa-angle-down"></i></span>
                <ul>
                  <li><a href="drinks.html">Напитки</a></li>
                  <li><a href="supplements.html">Добавки</a></li>
                </ul>
              </li>
              <li><a href="cosmetics.html">Козметика</a><span class="arrow"><i class="fa fa-angle-down"></i></span>
                <ul>
                  <li><a href="face.html">Грижа за лицето</a></li>
                  <li><a href="body.html">Грижа за тялото</a></li>
                  <li><a href="personal_hygiene.html">Лична хигиена</a></li>
                </ul>
              </li>
              <li><a href="weightcontrol.html">Контрол на теглото</a></li>
              <li><a href="packages.html">Пакети</a></li>
            </ul>
          </li>
          <li class="h1"><a href="contacts.html">Контакти</a></li>
          <li class="h1"><a href="shop.html">Пазарувай с отстъпка</a></li>
        </ul>
      </nav>
    </header>

    <main class="main_section">

      <div id="quad">
        <figure>
        <img src="" id="image1" alt="Product image">
        </figure>
        <figure>
          <img src="" id="image2" alt="Product image">
        </figure>
        <figure>
          <img src="" id="image3" alt="Product image">
        </figure>
      </div>

      <div class="text">

        <div class="name">
          <div class="descr">
            <h1 class="nameEN"></h1>
            <h2 class="nameBG"></h2>
            <p class="p-id"></p>
            <div class="button">
              <a href="contacts.html" class="btn red">
              <span>Поръчай</span><ion-icon name="arrow-forward"></ion-icon>
              </a>
            </div>
          </div>
          <div class="circle">
            <p class="price"></p>
          </div>
        </div>

        <img id="expandedImg" src="" alt="Expanded image">
        <div id="quad_mobile">
          <figure>
          <img src="" id="image01" alt="Product image">
          </figure>
          <figure>
            <img src="" id="image02" alt="Product image">
          </figure>
          <figure>
            <img src="" id="image03" alt="Product image">
          </figure>
        </div>

        <p class="txt"></p>

        <div class="tab1">
          <div class="tab">
              <button class="tablinks" onclick="openTab(event, 'Content')">Състав<i class="bi bi-arrow-down-short"></i></button>
              <button class="tablinks" onclick="openTab(event, 'Use')">Употреба<i class="bi bi-arrow-down-short"></i></button>
              <button class="tablinks" onclick="openTab(event, 'Storage')">Съхранение<i class="bi bi-arrow-down-short"></i></button>
          </div>

          <div class="tabcontent" id="Content">
              <h2>Състав</h2>
              <p></p>
          </div>

          <div class="tabcontent" id="Use">
              <h2>Употреба</h2>
              <p></p>
          </div>

          <div class="tabcontent" id="Storage">
              <h2>Съхранение</h2>
              <p></p>
          </div>

        </div>
        
      </div>

    </main>

    <footer class="footer">
      <div class="left">
          <div class="icon"><a href="https://www.facebook.com/profile.php?id=100080698834400"><i class="bi bi-facebook"></i></a><a href="https://www.instagram.com/iglika.velichkova/"><i class="bi bi-instagram"></i></a><a href="https://www.youtube.com/@iglikarumenova"><i class="bi bi-youtube"></i></a></div>
          <p class="p1">Контакти</p>
          <p class="telephone"><i class="bi bi-telephone">+359 88 766 3362</i></p>
          <p class="email"><i class="bi bi-envelope"> iglika.velichkova@gmail.com</i></p>
          <p class="name">Иглика Величкова</p>
      </div>
      <div class="center">
          <p class="copyright">Copyright © 2023 Иглика Величкова</p>
      </div>
      <div class="right">
          <div class="logo1"><img src="index_img/IglikaLogo.png" alt="logo"></div>
          <p class="FAQ"></i><a href="FAQ.html">Често задавани въпроси</a></p>
          <p class="termsOfUse"><a href="Terms&Conditions.html">Условия за ползване</a></p>
          <p class="biscuits"><a href="Buscuits.html">Бисквитки</a></p>
      </div>
    </footer>

    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script>

      document.addEventListener("DOMContentLoaded", function() {

          fetch('data.json')
          .then(response => response.json())
          .then(data => {

              let queryString = window.location.search;
              let urlParams = new URLSearchParams(queryString);
              let GET_id = urlParams.get('id');
              let selected_product;

              for (var i = 0; i < data.length; i++) {
                if(data[i]['p-id'] == GET_id){
                  selected_product = data[i];
                  break;
                }
              }

              document.querySelector('.nameEN').innerText = selected_product.nameEN;
              document.querySelector('.nameBG').innerText = selected_product.nameBG;
              document.querySelector('.p-id').innerText = selected_product['p-id'];
              document.getElementById('image1').src = selected_product.image1;
              document.getElementById('image2').src = selected_product.image2;
              document.getElementById('image3').src = selected_product.image3;
              document.getElementById('image01').src = selected_product.image1;
              document.getElementById('image02').src = selected_product.image2;
              document.getElementById('image03').src = selected_product.image3;
              document.querySelector('.txt').innerText = selected_product.txt;
              document.querySelector('.price').innerText = selected_product.price;
              document.getElementById('Content').querySelector('p').innerText = selected_product.Content;
              document.getElementById('Use').querySelector('p').innerText = selected_product.Use;
              document.getElementById('Storage').querySelector('p').innerText = selected_product.Storage;

              function setImage(id, src) {
                var img = document.getElementById(id);
                if (src) {
                    img.src = src;
                    img.style.display = '';
                } else {
                    img.style.display = 'none';
                }
            }

            setImage('image1', selected_product.image1);
            setImage('image2', selected_product.image2);
            setImage('image3', selected_product.image3);
            setImage('image01', selected_product.image1);
            setImage('image02', selected_product.image2);
            setImage('image03', selected_product.image3);

            document.querySelector('.txt').innerText = selected_product.txt;
            document.querySelector('.price').innerText = selected_product.price;
            document.getElementById('Content').querySelector('p').innerText = selected_product.Content;
            document.getElementById('Use').querySelector('p').innerText = selected_product.Use;
            document.getElementById('Storage').querySelector('p').innerText = selected_product.Storage;
          })
          .catch(error => console.error('Error fetching data:', error));

          
      });


       

        window.onload = function() {
        document.querySelector('.tablinks[onclick="openTab(event, \'Content\')"]').click();
      }

        document.querySelectorAll('.arrow').forEach(function(arrow) {
          arrow.addEventListener('click', function(e) {
            e.stopPropagation();
            let submenu = this.nextElementSibling;
            submenu.style.display = submenu.style.display === 'none' ? 'block' : 'none';
          });
        });


        function openTab(evt, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }

        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace(" active", "");
        }

        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
      }



      var quad = document.getElementById('quad');
      var quadImages = document.querySelectorAll("#quad figure");

      // Function to toggle expansion
      function toggleExpansion() {
          if (this.classList.contains("expanded")) {
              this.classList.remove("expanded");
              quad.classList.remove("full");
          } else {
              // Remove "expanded" class from all images before expanding current one
              for (var j = 0; j < quadImages.length; j++) {
                  quadImages[j].classList.remove("expanded");
              }
              this.classList.add("expanded");
              quad.classList.add("full");
          }
      }

      // Check if the device supports touch events
      var isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints;

      // Add event listeners based on device type
      if (isTouchDevice) {
          for (var i = 0; i < quadImages.length; i++) {
              quadImages[i].addEventListener('click', toggleExpansion);
          }
      } else {
          for (var i = 0; i < quadImages.length; i++) {
              quadImages[i].addEventListener('mouseenter', function() {
                  this.classList.add("expanded");
                  quad.classList.add("full");
              });

              quadImages[i].addEventListener('mouseleave', function() {
                  this.classList.remove("expanded");
                  quad.classList.remove("full");
              });

              quadImages[i].addEventListener('click', toggleExpansion);
          }
      }


      document.addEventListener('DOMContentLoaded', function() {
        var images = document.querySelectorAll('#quad_mobile img');
        var expandedImg = document.querySelector('#expandedImg');

        images.forEach(function(img) {
            img.addEventListener('click', function() {
                expandedImg.src = img.src;
                expandedImg.style.display = 'block';
            });
        });

        expandedImg.addEventListener('click', function() {
            expandedImg.style.display = 'none';
        });

        window.addEventListener('scroll', function() {
        if (expandedImg.style.display === 'block') {
            expandedImg.style.display = 'none';
        }
    });

    
    });
  
    </script>
  </body>
</html>